<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <link rel="shortcut icon" href="#" />
    <link rel="stylesheet" type="text/css" href="/root/Yunzai-Bot/plugins/genshin/resources/html/ledger/ledger.css" />
    <link rel="preload" href="https://unpkg.com/@antv/g2plot@latest/dist/g2plot.min.js" as="script" />
    <link rel="preload" href="/root/Yunzai-Bot/resources//font/tttgbnumber.ttf" as="font">
    <link rel="preload" href="/root/Yunzai-Bot/plugins/genshin/resources/img/other/bg.webp" as="image">
    <link rel="preload" href="/root/Yunzai-Bot/plugins/genshin/resources/img/other/chart.png" as="image">
  </head>

  <body>
    <div class="container" id="container">
      <div class="title-box">
        <div class="info">
          <div class="uid">ID：102450564</div>
          <div class="month">2月19号札记</div>
        </div>
        <img class="genshin_logo" src="/root/Yunzai-Bot/plugins/genshin/resources/img/other/原神.png" />
      </div>
      <div class="data-box">
        <div class="month">
          <div class="head">当月获取：</div>
          <div class="primogems">
            <div class="icon-ys"></div>
            <div class="text">原石：600 | 4 抽</div>
          </div>
          <div class="primogems">
            <div class="icon-mola"></div>
            <div class="text">摩拉：18.3 w</div>
          </div>
        </div>
        <div class="day">
          <div class="head">上月获取：</div>
          <div class="primogems">
            <div class="icon-ys"></div>
            <div class="text">原石：0 | 0 抽</div>
          </div>
          <div class="primogems">
            <div class="icon-mola"></div>
            <div class="text">摩拉：0</div>
          </div>
        </div>
      </div>
      <div class="chart-box">
        <div class="head">原石收入组成：</div>
        <div class="chart-info">
          <div id="chartContainer"></div>
          <ul class="tooltip">
            
            <li>
              <i style="background: #7a6da7"></i>
              <span class="action">邮件奖励</span> <em>50%</em><span class="num">300</span>
            </li>
            
            <li>
              <i style="background: #597ea0"></i>
              <span class="action">活动奖励</span> <em>50%</em><span class="num">300</span>
            </li>
            
            <li>
              <i style="background: #bd9a5a"></i>
              <span class="action">每日活跃</span> <em>0%</em><span class="num">0</span>
            </li>
            
            <li>
              <i style="background: #739970"></i>
              <span class="action">深境螺旋</span> <em>0%</em><span class="num">0</span>
            </li>
            
            <li>
              <i style="background: #d56565"></i>
              <span class="action">冒险奖励</span> <em>0%</em><span class="num">0</span>
            </li>
            
            <li>
              <i style="background: #70b2b4"></i>
              <span class="action">任务奖励</span> <em>0%</em><span class="num">0</span>
            </li>
            
            <li>
              <i style="background: #73a9c6"></i>
              <span class="action">其他</span> <em>0%</em><span class="num">0</span>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </body>

  <script type="text/javascript" src="https://unpkg.com/@antv/g2plot@latest/dist/g2plot.min.js"></script>
  <script>
    const { Pie } = G2Plot;
    const data = JSON.parse(`[{"action_id":5,"action":"邮件奖励","num":300,"percent":50,"color":"#7a6da7"},{"action_id":6,"action":"活动奖励","num":300,"percent":50,"color":"#597ea0"},{"action_id":3,"action":"每日活跃","num":0,"percent":0,"color":"#bd9a5a"},{"action_id":4,"action":"深境螺旋","num":0,"percent":0,"color":"#739970"},{"action_id":1,"action":"冒险奖励","num":0,"percent":0,"color":"#d56565"},{"action_id":2,"action":"任务奖励","num":0,"percent":0,"color":"#70b2b4"},{"action_id":0,"action":"其他","num":0,"percent":0,"color":"#73a9c6"}]`);
    const piePlot = new Pie("chartContainer", {
      renderer: "svg",
      animation: false,
      data: data,
      appendPadding: 10,
      angleField: "num",
      colorField: "action",
      radius: 1,
      innerRadius: 0.7,
      color: JSON.parse(`["#7a6da7","#597ea0","#bd9a5a","#739970","#d56565","#70b2b4","#73a9c6"]`),
      meta: {
        // num: {
        //   formatter: (v) => `${v}`,
        // },
      },
      label: {
        type: "inner",
        offset: "-50%",
        autoRotate: false,
        style: {
          textAlign: "center",
          fontFamily: "tttgbnumber",
        },
        formatter: ({ percent }) => {
          percent = (percent * 100).toFixed(0);
          return percent > 2 ? `${percent}%` : "";
        },
      },
      statistic: {
        title: {
          offsetY: -18,
          content: "总计",
        },
        content: {
          offsetY: -10,
          style: {
            fontFamily: "tttgbnumber",
          },
        },
      },
      legend:false,
    });
    piePlot.render();
  </script>
</html>
